{% extends 'base.html' %}
<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    {% block head %}
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title></title>
    <link rel="icon" type="image/ico" href="/static/favicon.ico">
    <link rel="shortcut icon" type="image/ico" href="/static/favicon.ico">
    <!-- sunnylogin -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css" integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">

    <script>
        $(function () {
            $("#password1").peeper({
                mask: false,
                showPasswordCss: 'fa fa-eye',
                showCopyBtn: false
            });
        });
    </script>
    <style>
        body {
            background: url("/static/images/bg.jpg") #fff0!important;
        }
    </style>
    {% endblock %}
</head>

<body>
    {% block body %}
    <div id="vue_app" class="cont" style="min-height: 100vh;">
        <div class="wrap">
            <form class="form row">
                <div class="text-center"><img src="#logo.png"></div>
                <h5 id="company_name" class="text-center">257房地</h5>
                <div class="form-group">
                    <div class="col">
                        <input class="form-control text-box single-line" type="text" placeholder="請輸入帳號" v-model="loginData.login" @keydown.enter="login()">
                    </div>
                </div>
                <div class="form-group mb-0">
                    <div class="col">
                        <input id="password1" type="password" class="form-control" name="password" placeholder="請輸入密碼" v-model="loginData.password" @keydown.enter="login()">
                    </div>
                </div>
                <div class="form-group">
                    <div class="col float-end">
                        <input id="remember" type="checkbox" v-model="loginData.remember">
                        <label for="remember" class="mx-2">記住我</label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col">
                        <button type="button" class="btn btn-primary width100" @click="login()">登入</button>
                    </div>
                </div>

                <!-- <p class="text-secondary text-center"><a href="#">忘記密碼</a></p> -->
            </form>
        </div>
    </div>
    {% endblock %}
    {% block script %}
    <script>
        const baseapp = Vue.createApp({
            delimiters: ['((', '))'],
            data() {
                return {
                    loginData: {
                        login: "",
                        password: "",
                        remember: false
                    }
                }
            },
            methods: {
                login(){
                    new HTTPreq("/v_search/login/", "fd").setHeaders({'Authorization': 'token a021bd4735ebec44a3564cea9390d91aadfdabff'}).posta(this.loginData).then(rcv => {
                        var res = supfnc.toJSON(rcv.result);
                        if(res.status == "OK"){
                            window.location.href = "/v_search/land_dev/";
                        }
                        else{
                            Swal.fire(res.msg);
                        }
                    });
                }
            },
            mounted(){},
            created(){},
            updated(){},
            beforeUpdate(){},
        });

        // test
        // new HTTPreq("/v_search/get_plan_name/", "fd").setHeaders({'Authorization': 'token a021bd4735ebec44a3564cea9390d91aadfdabff'}).posta({ area: "A_01" }).then((rcv) => {
        //     var res = supfnc.toJSON(rcv.result);
        //     console.log(res);
        // });
    </script>
    {% endblock %}
</body>

</html>